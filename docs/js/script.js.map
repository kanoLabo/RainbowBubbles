{"version":3,"sources":["webpack:///webpack/bootstrap 10052de941565eec64a7","webpack:///./src/ts/main.ts"],"names":[],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 10052de941565eec64a7","/*\n * パーティクルモーションのクラス\n * */\nimport Bitmap = createjs.Bitmap;\n\nclass ParticleCreator {\n  private _stage:createjs.Stage;  // ステージ\n  private _canvas:HTMLCanvasElement;  // ステージ\n  private _mainLayer:MainLayer;   // メインのレイヤー\n\n  public constructor() {\n    // ステージを準備\n    this._canvas = <HTMLCanvasElement> document.getElementById(\"myCanvas\")\n    this._stage = new createjs.Stage(this._canvas);\n\n    // タッチ対応\n    if (createjs.Touch.isSupported()) {\n      createjs.Touch.enable(this._stage);\n    }\n\n    // Tickerを作成\n    createjs.Ticker.timingMode = createjs.Ticker.RAF;\n    createjs.Ticker.addEventListener(\"tick\", (event) => this.tickeHandler(event));\n    // メインのレイヤーを配置\n    this._mainLayer = new MainLayer();\n    this._stage.addChild(this._mainLayer);\n    // リサイズイベント\n    this.resizeHandler();\n    window.addEventListener(\"resize\", () => this.resizeHandler());\n  }\n\n  /*\n   * Tick Handler\n   * */\n  private tickeHandler(event):void {\n    if (!event.paused) {\n      this._stage.update();\n    }\n  }\n\n  /*\n   * リサイズのイベント処理\n   * */\n  private resizeHandler():void {\n    let windowWidth:number = window.innerWidth;\n    let windowHeight:number = window.innerHeight;\n    // ステージのサイズをwindowのサイズに変更\n    this._canvas.width = windowWidth;\n    this._canvas.height = windowHeight;\n    // メインレイヤーにリサイズイベントを通知\n    this._mainLayer.resizeHandler(windowWidth, windowHeight);\n  }\n}\n\n/*\n * メインのレイヤー\n * */\nclass MainLayer extends createjs.Container {\n  private _isMouseDown:boolean;   // マウスが押されているかどうか\n  private _particleEmitter:ParticleEmitter;   // パーティクル発生装置のインスタンス\n  private _bg:createjs.Shape; // 背景\n  private _tickCount:number = 0;\n\n  public constructor() {\n    super();\n    this._bg = new createjs.Shape();\n    this.drawBG(800, 600);\n    this.addChild(this._bg);\n    this._particleEmitter = new ParticleEmitter();  // パーティクル発生装置のインスタンスを作成\n    this.addChild(this._particleEmitter);\n\n    this.addEventListener(\"tick\", (event) => this.tickHandler(event));\n    this.addEventListener(\"mousedown\", (event) => this.mouseDownHandler(event));\n    this.addEventListener(\"pressup\", (event) => this.mouseUpHandler(event));\n  }\n\n  public resizeHandler(windowWidth:number, windowHeight:number):void {\n    this.drawBG(windowWidth, windowHeight);\n  }\n\n  /*\n   * 指定の大きさの背景を描画\n   * */\n  private drawBG(bgWidth:number, bgHeight:number):void {\n    this._bg.graphics.clear();\n    this._bg.graphics.beginLinearGradientFill([\"#383838\", \"#474747\"], [0, 1], 0, 0, 0, bgHeight)\n      .drawRect(0, 0, bgWidth, bgHeight)\n      .endFill();\n  }\n\n  /*\n   * マウスを押した時の処理\n   * */\n  private mouseDownHandler(event):void {\n    this._isMouseDown = true;\n  }\n\n  /*\n   * マウスを離した時の処理\n   * */\n  private mouseUpHandler(event):void {\n    this._isMouseDown = false;\n  }\n\n  /*\n   * Tickイベントで実行される処理\n   * */\n  private tickHandler(event):void {\n\n    // マウスの座標\n    let mouseX:number = this.getStage().mouseX;\n    let mouseY:number = this.getStage().mouseY;\n    // パーティクル発生装置の座標を更新\n    this._particleEmitter.update(mouseX, mouseY);\n\n    if (this._isMouseDown) {\n      this._particleEmitter.emitParticle();\n      this._tickCount++;\n\n      if (this._tickCount >= 1000)\n        this._tickCount = 0;\n    }\n  }\n}\n\n/*\n * パーティクル発生装置\n * */\nclass ParticleEmitter extends createjs.Container {\n  // パーティクルの発生座標。発生装置そのものの座標ではない。\n  private _emitX:number;\n  private _emitY:number;\n  // 発生座標に近づく速度\n  private _vx:number;\n  private _vy:number;\n  // アニメーション中のパーティクルを格納する配列\n  private _animationParticles:Particle[] = [];\n  // パーティクルのオブジェクトプール。アニメーションがされていないパーティクルがここに待機している。\n  private _particlePool:Particle[] = [];\n\n  private _browserNum:number;\n\n  public constructor() {\n    super();\n    this._emitX = 0;\n    this._emitY = 0;\n    this._vx = 0;\n    this._vy = 0;\n  }\n\n  /*\n   * MainLayerのtickイベント毎に実行される処理\n   * */\n  public update(goalX:number, goalY:number) {\n    // 発生装置はgoalに徐々に近づいていく。\n    let dx:number = goalX - this._emitX;\n    let dy:number = goalY - this._emitY;\n    let d:number = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));  // 斜め方向の移動距離\n    let rad:number = Math.atan2(dy, dx);    // 移動角度\n    this._vx = Math.cos(rad) * d * 0.1; // 速度の更新\n    this._vy = Math.sin(rad) * d * 0.1; // 速度の更新\n    this._emitX += this._vx;\n    this._emitY += this._vy;\n    // アニメーション中のパーティクルの状態を更新\n    this.updateParticles();\n  }\n\n  /*\n   *　パーティクルを発生させる\n   * */\n  public emitParticle():void {\n    let particle:Particle = this.getParticle();\n    particle.init(this._emitX, this._emitY, this._vx, this._vy);\n    this.addChild(particle);\n    // アニメーション中のパーティクルとして設定\n    this._animationParticles.push(particle);\n  }\n\n  /*\n   *　パーティクルのアニメーション\n   * */\n  private updateParticles():void {\n    let windowWidth:number = window.innerWidth;\n    let windowHeight:number = window.innerHeight;\n\n    for (let i:number = 0; i < this._animationParticles.length; i++) {\n      let particle:Particle = this._animationParticles[i];\n      if (!particle.isDead) {\n        if (particle.y >= windowHeight -50) {\n          particle.vy *= -0.5;\n          particle.y = windowHeight -50;\n        }\n\n        if (particle.x >= windowWidth) {\n          particle.vx *= -0.4;\n          particle.x = windowWidth;\n        } else if (particle.x <= 0) {\n          particle.vx *= -0.4;\n          particle.x = 0;\n        }\n\n        particle.update();\n      }\n      else {\n        // particleを取り除く\n        this.removeParticle(particle, i);\n      }\n    }\n  }\n\n  /*\n   * オブジェクトプールからパーティクルを取得。\n   * プールにパーティクルが無ければ新規作成\n   */\n  private getParticle():Particle {\n    if (this._particlePool.length > 0) {\n      return this._particlePool.shift();\n    }\n    else {\n      return new Particle();\n    }\n  }\n\n  /*\n   * パーティクルを取り除く。\n   * */\n  private removeParticle(particle:Particle, animationIndex:number):void {\n    // Containerからパーティクルをremove\n    this.removeChild(particle);\n    // アニメーションのパーティクルから取り除く。\n    this._animationParticles.splice(animationIndex, 1);\n    if (this._particlePool.indexOf(particle) == -1) {\n      // プールにパーティクルが無いことを確認して格納\n      this._particlePool.push(particle);\n    }\n  }\n}\n\n/*\n * パーティクルのクラス\n * */\nclass Particle extends createjs.Container {\n  private _life:number;   // パーティクルの寿命\n  private _count:number;  // パーティクルの年齢。時間経過とともに加算されていく。\n  public vx:number; // 速度X\n  public vy:number; // 速度Y\n  public vr:number; // 回転\n  public isDead:boolean;  // パーティクルが寿命を迎えたかどうか。\n\n  public constructor() {\n\n    super();\n\n    const sudaNum:number = Math.floor(Math.random() * 3) + 1;\n\n    const bitmap:createjs.Bitmap = new Bitmap(`./images/suda${sudaNum}.png`);\n    bitmap.x = -50;\n    bitmap.y = -50;\n    this.addChild(bitmap);\n\n    // 加算で重ねる\n    this.compositeOperation = \"lighter\";\n    this.mouseEnabled = false;\n  }\n\n  /*\n   * パーティクルの初期化\n   * @param parentVX, parentVY :親コンテナの速度。パーティクルの速度に影響を与える。\n   * */\n  public init(emitX:number, emitY:number, parentVX:number, parentVY:number):void {\n    this.x = emitX;\n    this.y = emitY;\n    this._life = 200 + Math.random() * 30;\n    this._count = 0;\n    this.vx = parentVX + (Math.random() - 0.5) * 10;\n    this.vy = parentVY - 8 - Math.random() * 10;\n    this.vr = (Math.random() - 0.5) * 5;\n\n    this.isDead = false;\n    this.alpha = 1;\n    this.rotation = 50 * Math.PI * (Math.random() - 0.5);\n  }\n\n  /*\n   * パーティクルの時間経過処理。\n   * _countがパーティクルの年齢。\n   * _lifeを超えたら死亡する。\n   *\n   * */\n  update():void {\n    this._count++;\n    if (this._count <= this._life) {\n      this.x += this.vx;\n      this.vy += 0.6;\n      this.y += this.vy;\n      this.rotation += this.vr;\n\n      // 死にそうになったら点滅を開始\n      if (this._count >= this._life / 2) {\n        // this.alpha = 0.6 + Math.random() * 0.4;\n        this.alpha = (1 - this._count / this._life);\n      }\n\n    }\n    else {\n      // 寿命が来たらフラグを立てる\n      this.isDead = true;\n    }\n  }\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\n  new ParticleCreator();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/main.ts"],"sourceRoot":""}